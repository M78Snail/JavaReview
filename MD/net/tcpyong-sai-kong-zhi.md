## TCP拥塞控制 {#toc_11}

> &lt;1&gt;.慢开始与拥塞避免  
> &lt;2&gt;.快重传和快恢复  
> &lt;3&gt;.随机早期检测RED

| ![](/assets/import7.5.png) |
| :---: |

### 1.慢开始与拥塞避免 {#toc_12}

发送报文段速率的确定，既要根据接收端的接收能力，又要从全局考虑不要使网络发生拥塞，这由接收窗口和拥塞窗口两个状态量确定。接收端窗口\(Reciver Window\)又称通知窗口\(Advertised Window\)，是接收端根据目前的接收缓存大小所许诺的最新窗口值，是来自接收端的流量控制。拥塞窗口\(Congestion Window\)是发送端根据自己估计的网络拥塞程度而设置的窗口值，是来自发送端的流量控制。

#### 慢启动原理： {#toc_13}

&lt;1&gt;. 当主机开始发送数据时，如果立即将较大的发送窗口的全部数据字节都注入到网络中，那么由于不清楚网络的情况，有可能引起网络拥塞。  
&lt;2&gt;. 比较好的方法是试探一下，即从小到大逐渐增大发送端的拥塞控制窗口数值。  
&lt;3&gt;. 通常在刚刚开始发送报文段时可先将拥塞窗口cwnd设置为一个最大报文段的MSS的数值。在每收到一个对新报文段确认后，将拥塞窗口增加至多一个MSS的数值,当rwind足够大的时候，为了防止拥塞窗口cwind的增长引起网络拥塞，还需要另外一个变量-慢开始门限ssthresh。

#### 拥塞控制具体过程为： {#toc_14}

&lt;1&gt;. TCP连接初始化，将拥塞窗口设置为1  
&lt;2&gt;. 执行慢开始算法，cwind按指数规律增长，直到cwind==ssthress开始执行拥塞避免算法，cwnd按线性规律增长  
&lt;3&gt;. 当网络发生拥塞，把ssthresh值更新为拥塞前ssthresh值的一半，cwnd重新设置为1，按照步骤&lt;2&gt;执行。

### 2. 快重传和快恢复 {#toc_15}

一条TCP连接有时会因等待重传计时器的超时而空闲较长的时间，慢开始和拥塞避免无法很好的解决这类问题，因此提出了快重传和快恢复的拥塞控制方法。  
　　快重传算法并非取消了重传机制，只是在某些情况下更早的重传丢失的报文段\(如果当发送端接收到三个重复的确认ACK时，则断定分组丢失，立即重传丢失的报文段，而不必等待重传计时器超时\)。慢开始算法只是在TCP建立时才使用。

#### 快恢复算法有以下两个要点： {#toc_16}

&lt;1&gt;. 当发送方连续接收到三个重复确认时，就执行“乘法减小”算法，把慢开始门限减半，这是为了预防网络发生拥塞。  
&lt;2&gt;. 由于发送发现在认为网络很可能没有发生拥塞，因此现在不执行慢开始算法，而是把cwnd值设置为慢开始门限减半后的值，然后开始执行拥塞避免算法，使拥塞窗口的线性增大。

